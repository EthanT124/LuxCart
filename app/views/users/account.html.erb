<!-- Change Username Section -->
<div class="mb-6 flex justify-center">
  <div class="w-full max-w-md">
    <h3 class="text-xl font-semibold mb-2 text-center">Change Username</h3>
    <h3 class="text-xl font-semibold mb-2 text-center">Current username: <%= current_user.username %></h3>

    <button onclick="toggleForm('usernameForm')" class="bg-blue-500 text-white px-4 py-2 rounded-lg mb-4 w-full">Update Username</button>
    <div id="usernameForm" style="display: none;">
      <%= form_with url: update_username_path, method: :post, local: true do |form| %>
        <div class="mb-4">
          <%= form.label :current_password, "Current Password", class: "block text-gray-700" %>
          <%= form.password_field :current_password, class: "w-full px-3 py-2 border rounded-lg", required: true %>
        </div>
        <div class="mb-4">
          <%= form.label :new_username, "New Username", class: "block text-gray-700" %>
          <%= form.text_field :new_username, class: "w-full px-3 py-2 border rounded-lg", required: true %>
        </div>
        <%= form.submit "Update Username", class: "bg-green-500 text-white px-4 py-2 rounded-lg w-full" %>
      <% end %>
    </div>
  </div>
</div>

<!-- Change Password Section -->
<div class="mb-6 flex justify-center">
  <div class="w-full max-w-md">
    <h3 class="text-xl font-semibold mb-2 text-center">Change Password</h3>
    <button onclick="toggleForm('passwordForm')" class="bg-blue-500 text-white px-4 py-2 rounded-lg mb-4 w-full">Update Password</button>
    <div id="passwordForm" style="display: none;">
      <%= form_with url: update_password_path, method: :post, local: true do |form| %>
        <div class="mb-4">
          <%= form.label :current_password, "Current Password", class: "block text-gray-700" %>
          <%= form.password_field :current_password, class: "w-full px-3 py-2 border rounded-lg", required: true %>
        </div>
        <div class="mb-4">
          <%= form.label :new_password, "New Password", class: "block text-gray-700" %>
          <%= form.password_field :new_password, class: "w-full px-3 py-2 border rounded-lg", required: true %>
        </div>
        <div class="mb-4">
          <%= form.label :confirm_password, "Confirm Password", class: "block text-gray-700" %>
          <%= form.password_field :confirm_password, class: "w-full px-3 py-2 border rounded-lg", required: true %>
        </div>
        <%= form.submit "Update Password", class: "bg-green-500 text-white px-4 py-2 rounded-lg w-full" %>
      <% end %>
    </div>
  </div>
</div>

<!-- Change Email Section -->
<div class="mb-6 flex justify-center">
  <div class="w-full max-w-md">
    <h3 class="text-xl font-semibold mb-2 text-center">Change Email</h3>
    <h3 class="text-xl font-semibold mb-2 text-center">Current Email: <%= current_user.email %></h3>
    <button onclick="toggleForm('emailForm')" class="bg-blue-500 text-white px-4 py-2 rounded-lg mb-4 w-full">Update Email</button>
    <div id="emailForm" style="display: none;">
      <%= form_with url: update_email_path, method: :post, local: true do |form| %>
        <div class="mb-4">
          <%= form.label :current_password, "Current Password", class: "block text-gray-700" %>
          <%= form.password_field :current_password, class: "w-full px-3 py-2 border rounded-lg", required: true %>
        </div>
        <div class="mb-4">
          <%= form.label :new_email, "New Email", class: "block text-gray-700" %>
          <%= form.email_field :new_email, class: "w-full px-3 py-2 border rounded-lg", required: true %>
        </div>
        <div class="mb-4">
          <%= form.label :confirm_email, "Confirm Email", class: "block text-gray-700" %>
          <%= form.email_field :confirm_email, class: "w-full px-3 py-2 border rounded-lg", required: true %>
        </div>
        <%= form.submit "Update Email", class: "bg-green-500 text-white px-4 py-2 rounded-lg w-full" %>
      <% end %>
    </div>
  </div>
</div>

<script>
  function toggleForm(formId) {
    var form = document.getElementById(formId);
    if (form.style.display === "none") {
      form.style.display = "block";
    } else {
      form.style.display = "none";
    }
  }
</script>